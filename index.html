<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ring Try-On</title>
    <link rel="stylesheet" href="style.css">
    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.160.0/build/three.module.js"
        }
    }
    </script>
    <!-- 3D Model Viewer for left-side preview -->
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
    <script nomodule src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer-legacy.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
    <script type="module" src="app.js"></script>
</head>
<body>
    <div id="viewer-panel">
        <div class="vp-header">3D Ring Preview</div>
        <model-viewer
            id="ring-preview"
            src="ring_test.glb"
            alt="3D Ring Preview"
            camera-controls
            interaction-policy="allow-when-focused"
            shadow-intensity="0.6"
            exposure="1.0"
            ar-modes="webxr scene-viewer quick-look"
            environment-image="neutral"
        >
        </model-viewer>
    </div>
    <div id="viewer-panel-right">
        <div class="vp-header">3D Earring Preview</div>
        <model-viewer
            id="earring-preview"
            src="earring_test.glb"
            alt="3D Earring Preview"
            camera-controls
            interaction-policy="allow-when-focused"
            shadow-intensity="0.6"
            exposure="1.0"
            ar-modes="webxr scene-viewer quick-look"
            environment-image="neutral"
        >
        </model-viewer>
    </div>
    <div id="controls">
        <div class="row">
            <label>Size <span id="scaleVal">1.00</span></label>
            <input id="scaleMult" type="range" min="0.5" max="2.0" step="0.01" value="1.0" />
        </div>
            <div class="row">
                <label>Anchor <span id="anchorVal">0.35</span></label>
                <input id="anchorT" type="range" min="0.0" max="1.0" step="0.01" value="0.35" />
            </div>
            <div class="row">
                <label>Smoothing <span id="smoothVal">0.22</span></label>
                <input id="smoothAlpha" type="range" min="0.05" max="0.6" step="0.01" value="0.22" />
            </div>
            <div class="row">
                <label>Env Light <span id="envVal">1.2</span></label>
                <input id="envIntensity" type="range" min="0.0" max="3.0" step="0.1" value="1.2" />
            </div>
            <div class="row">
                <label>Key Light <span id="lightVal">1.2</span></label>
                <input id="lightIntensity" type="range" min="0.0" max="2.0" step="0.1" value="1.2" />
            </div>
            <div class="row">
                <label>Yaw <span id="yawVal">0</span>°</label>
                <input id="yaw" type="range" min="-180" max="180" step="1" value="0" />
            </div>
            <div class="row">
                <label>Pitch <span id="pitchVal">0</span>°</label>
                <input id="pitch" type="range" min="-180" max="180" step="1" value="0" />
            </div>
            <div class="row">
                <label>Roll <span id="rollVal">0</span>°</label>
                <input id="roll" type="range" min="-180" max="180" step="1" value="0" />
            </div>
            <div class="row">
                <label>Occ Depth <span id="occDepthVal">0.08</span></label>
                <input id="occDepth" type="range" min="0.00" max="0.50" step="0.01" value="0.08" />
            </div>
            <div class="row">
                <label>Occ Width <span id="occWVal">1.00</span></label>
                <input id="occWidth" type="range" min="0.70" max="1.60" step="0.01" value="1.00" />
            </div>
            <div class="row">
                <label>Occ Height <span id="occHVal">0.90</span></label>
                <input id="occHeight" type="range" min="0.50" max="1.50" step="0.01" value="0.90" />
            </div>
            <div class="row small">
                <label><input id="occEnable" type="checkbox" checked /> Occlusion</label>
                <label><input id="forceGold" type="checkbox" /> Force Gold</label>
                <div>
                    <button id="pause">Pause</button>
                    <button id="autoCalib">Auto-Calibrate</button>
                    <button id="reset">Reset</button>
                </div>
            </div>
        </div>
    <div id="container">
        <video id="video" src="hand_video.mp4" muted autoplay loop playsinline></video>
        <canvas id="three-canvas"></canvas>
    </div>
</body>
</html>
